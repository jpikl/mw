<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<title>rew | ğŸ›¤ Path filters</title>
<meta name="description" content="A text processing CLI tool that rewrites FS paths according to a pattern.">
<meta name="keywords" content="rename-files, copy-files, replace-text, command-line, text-processing, rust, tool, command-line-tool, terminal, regex">
<meta name="generator" content="https://github.com/jpikl/hatcher">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/rew/style.css">
<script defer src="/rew/script.js"></script><script>document.documentElement.setAttribute("data-theme", localStorage.theme || "light");</script>
</head>
<body>
<a id="nav-open"></a>
<header id="header">
<a id="hide-nav-toggle" class="nav-toggle" title="Hide navigation" role="button" onclick="focusId('show-nav-toggle')" aria-pressed="true" href="#">â˜°</a>
<a id="show-nav-toggle" class="nav-toggle" title="Show navigation" role="button" onclick="focusId('hide-nav-toggle')" aria-pressed="false" href="#nav-open">â˜°</a>
<h1 id="header-title" title="A text processing CLI tool that rewrites FS paths according to a pattern.">
<a class="header-link" href="/rew/">rew</a>
</h1>
<nav id="header-nav">
<ul id="header-nav-list">
<li class="header-nav-item">
<a  id="github-header-link" class="header-link" href="https://github.com/jpikl/rew" rel="external" title="GitHub repository for project jpikl/rew">
<svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 24 24" width="24" height="24">
<title>GitHub logo</title>
<path d="
  M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577
  0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633
  17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809
  1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38
  1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405
  1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84
  1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015
  3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12
"/>
</svg>
GitHub
</a>
</li>
</ul>
</nav>
<label id="theme-switch" title="Switch between light and dark theme" disabled>
<input id="theme-switch-input" type="checkbox">
<span id="dark-theme-switch-icon" class="theme-switch-icon" aria-hidden="true">ğŸŒœ</span>
<span id="theme-switch-track" aria-hidden="true"></span>
<span id="light-theme-switch-icon" class="theme-switch-icon" aria-hidden="true">ğŸŒ</span>
</label>
</header>
<div id="page">
<nav id="nav">
<ul class="nav-list">
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/">ğŸ’¡ Overview</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/install">ğŸ“¦ Installation</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/usage">ğŸš€ Usage</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/pattern">âœï¸ Pattern</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters">ğŸ•¶ Filters</a>
<ul class="nav-list">
<li class="nav-item">
<a class="nav-label nav-link is-active" href="/rew/filters/path">ğŸ›¤ Path filters</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters/substr">ğŸ† Substring filters</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters/field">ğŸ“Š Field filters</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters/replace">ğŸ” Replace filters</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters/regex">â­ï¸ Regex filters</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters/format">ğŸ¨ Format filters</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/filters/generate">ğŸ­ Generators</a>
</li>
</ul>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/input">âŒ¨ï¸ Input</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/output">ğŸ’¬ Output</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/examples">ğŸ—ƒ Examples</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/compare">ğŸ”¬ Comparison</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/changelog">ğŸ“ˆ Changelog</a>
</li>
<li class="nav-item">
<a class="nav-label nav-link" href="/rew/license">ğŸ“ƒ License</a>
</li>
</ul>
</nav>
<main id="main">
<article id="content">
<!-- pandoc output start -->
<h1 id="path-filters" class="heading">ğŸ›¤ Path filters <a class="heading-anchor" href="#path-filters">#</a></h1>
<p>Path filters assume that their input value is a FS path.</p>
<h2 id="path-components" class="heading">Path components <a class="heading-anchor" href="#path-components">#</a></h2>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Filter</th>
<th>Description</th>
<th></th>
<th>Filter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>d</code></td>
<td>Parent directory</td>
<td></td>
<td><code>D</code></td>
<td>Remove last name</td>
</tr>
<tr class="even">
<td><code>f</code></td>
<td>File name</td>
<td></td>
<td><code>F</code></td>
<td>Last name</td>
</tr>
<tr class="odd">
<td><code>b</code></td>
<td>Base name</td>
<td></td>
<td><code>B</code></td>
<td>Remove extension</td>
</tr>
<tr class="even">
<td><code>e</code></td>
<td>Extension</td>
<td></td>
<td><code>E</code></td>
<td>Extension with dot</td>
</tr>
</tbody>
</table></div>
<p>For input value <code>/home/alice/notes.txt</code>, filters would evaluate to:</p>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Pattern</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>{}</code></td>
<td><code>/home/alice/notes.txt</code></td>
</tr>
<tr class="even">
<td><code>{d}</code>, <code>{D}</code></td>
<td><code>/home/alice</code></td>
</tr>
<tr class="odd">
<td><code>{f}</code>, <code>{F}</code></td>
<td><code>notes.txt</code></td>
</tr>
<tr class="even">
<td><code>{b}</code></td>
<td><code>notes</code></td>
</tr>
<tr class="odd">
<td><code>{B}</code></td>
<td><code>/home/alice/notes</code></td>
</tr>
<tr class="even">
<td><code>{e}</code></td>
<td><code>txt</code></td>
</tr>
<tr class="odd">
<td><code>{E}</code></td>
<td><code>.txt</code></td>
</tr>
</tbody>
</table></div>
<p>Parent directory <code>d</code> might give a different result than <code>D</code> which removes last name of a path. Similarly, file name <code>f</code> might not be the same as last name <code>F</code> which is a complement of <code>D</code>.</p>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Input</th>
<th><code>{d}</code></th>
<th><code>{D}</code></th>
<th><code>{f}</code></th>
<th><code>{F}</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/</code></td>
<td><code>/</code></td>
<td><code>/</code></td>
<td><em>(empty)</em></td>
<td><em>(empty)</em></td>
</tr>
<tr class="even">
<td><code>/a</code></td>
<td><code>/</code></td>
<td><code>/</code></td>
<td><code>a</code></td>
<td><code>a</code></td>
</tr>
<tr class="odd">
<td><code>a/b</code></td>
<td><code>a</code></td>
<td><code>a</code></td>
<td><code>b</code></td>
<td><code>b</code></td>
</tr>
<tr class="even">
<td><code>a</code></td>
<td><code>.</code></td>
<td><em>(empty)</em></td>
<td><code>a</code></td>
<td><code>a</code></td>
</tr>
<tr class="odd">
<td><code>.</code></td>
<td><code>./..</code></td>
<td><em>(empty)</em></td>
<td><em>(empty)</em></td>
<td><code>.</code></td>
</tr>
<tr class="even">
<td><code>..</code></td>
<td><code>../..</code></td>
<td><em>(empty)</em></td>
<td><em>(empty)</em></td>
<td><code>..</code></td>
</tr>
<tr class="odd">
<td><em>(empty)</em></td>
<td><code>..</code></td>
<td><em>(empty)</em></td>
<td><em>(empty)</em></td>
<td><em>(empty)</em></td>
</tr>
</tbody>
</table></div>
<p>Extension with dot <code>E</code> can be useful when dealing with files with no extension.</p>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Input</th>
<th><code>new.{e}</code></th>
<th><code>new{E}</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>old.txt</code></td>
<td><code>new.txt</code></td>
<td><code>new.txt</code></td>
</tr>
<tr class="even">
<td><code>old</code></td>
<td><code>new.</code></td>
<td><code>new</code></td>
</tr>
</tbody>
</table></div>
<h2 id="absolute-and-relative-paths" class="heading">Absolute and relative paths <a class="heading-anchor" href="#absolute-and-relative-paths">#</a></h2>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Filter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>w</code></td>
<td>Working directory</td>
</tr>
<tr class="even">
<td><code>a</code></td>
<td>Absolute path</td>
</tr>
<tr class="odd">
<td><code>A</code></td>
<td>Relative path</td>
</tr>
</tbody>
</table></div>
<p>Absolute path <code>a</code> and relative path <code>A</code> are both resolved against working directory <code>w</code>.</p>
<div class="table-container"><table>
<thead>
<tr class="header">
<th><code>{w}</code></th>
<th>Input</th>
<th><code>{a}</code></th>
<th><code>{A}</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/home/alice</code></td>
<td><code>/home/bob</code></td>
<td><code>/home/bob</code></td>
<td><code>../bob</code></td>
</tr>
<tr class="even">
<td><code>/home/alice</code></td>
<td><code>../bob</code></td>
<td><code>/home/bob</code></td>
<td><code>../bob</code></td>
</tr>
</tbody>
</table></div>
<p>By default, working directory <code>w</code> is set to your current working directory. You can change that using the <code>-w, --working-directory</code> option. <code>w</code> filter will always output an absolute path, even if you set a relative one using the <code>-w</code> option.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rew</span> <span class="at">-w</span> <span class="st">&#39;/home/alice&#39;</span> <span class="st">&#39;{w}&#39;</span> <span class="co"># Absolute path</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">rew</span> <span class="at">-w</span> <span class="st">&#39;../alice&#39;</span>    <span class="st">&#39;{w}&#39;</span> <span class="co"># Relative to your current working directory</span></span></code></pre></div>
<h2 id="path-normalization" class="heading">Path normalization <a class="heading-anchor" href="#path-normalization">#</a></h2>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Filter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>p</code></td>
<td>Normalized path</td>
</tr>
<tr class="even">
<td><code>P</code></td>
<td>Canonical path</td>
</tr>
</tbody>
</table></div>
<p>Normalized path <code>p</code> is constructed using the following rules:</p>
<ul>
<li>On Windows, all <code>/</code> separators are converted to <code>\</code>.</li>
<li>Consecutive directory separators are collapsed into one.</li>
<li>Non-root trailing directory separator is removed.</li>
<li>Unnecessary current directory <code>.</code> components are removed.</li>
<li>Parent directory <code>..</code> components are resolved where possible.</li>
<li>Initial <code>..</code> components in an absolute path are dropped.</li>
<li>Initial <code>..</code> components in a relative path are kept.</li>
<li>Empty path is resolved to <code>.</code> (current directory).</li>
</ul>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
<th></th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>(empty)</em></td>
<td><code>.</code></td>
<td></td>
<td><code>/</code></td>
<td><code>/</code></td>
</tr>
<tr class="even">
<td><code>.</code></td>
<td><code>.</code></td>
<td></td>
<td><code>/.</code></td>
<td><code>/</code></td>
</tr>
<tr class="odd">
<td><code>..</code></td>
<td><code>..</code></td>
<td></td>
<td><code>/..</code></td>
<td><code>/</code></td>
</tr>
<tr class="even">
<td><code>a/</code></td>
<td><code>a</code></td>
<td></td>
<td><code>/a/</code></td>
<td><code>/a</code></td>
</tr>
<tr class="odd">
<td><code>a//</code></td>
<td><code>a</code></td>
<td></td>
<td><code>/a//</code></td>
<td><code>/a</code></td>
</tr>
<tr class="even">
<td><code>a/.</code></td>
<td><code>a</code></td>
<td></td>
<td><code>/a/.</code></td>
<td><code>/a</code></td>
</tr>
<tr class="odd">
<td><code>a/..</code></td>
<td><code>.</code></td>
<td></td>
<td><code>/a/..</code></td>
<td><code>/</code></td>
</tr>
<tr class="even">
<td><code>./a</code></td>
<td><code>a</code></td>
<td></td>
<td><code>/./a</code></td>
<td><code>/a</code></td>
</tr>
<tr class="odd">
<td><code>../a</code></td>
<td><code>../a</code></td>
<td></td>
<td><code>/../a</code></td>
<td><code>/a</code></td>
</tr>
<tr class="even">
<td><code>a//b</code></td>
<td><code>a/b</code></td>
<td></td>
<td><code>/a//b</code></td>
<td><code>/a/b</code></td>
</tr>
<tr class="odd">
<td><code>a/./b</code></td>
<td><code>a/b</code></td>
<td></td>
<td><code>/a/./b</code></td>
<td><code>/a/b</code></td>
</tr>
<tr class="even">
<td><code>a/../b</code></td>
<td><code>b</code></td>
<td></td>
<td><code>/a/../b</code></td>
<td><code>/b</code></td>
</tr>
</tbody>
</table></div>
<p>Canonical path <code>P</code> works similarly to <code>p</code> but has some differences:</p>
<ul>
<li>Evaluation will fail for a non-existent path.</li>
<li>Result will always be an absolute path.</li>
<li>If path is a symbolic link, it will be resolved.</li>
</ul>
<h2 id="directory-separator" class="heading">Directory separator <a class="heading-anchor" href="#directory-separator">#</a></h2>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Filter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>z</code></td>
<td>Ensure trailing directory separator</td>
</tr>
<tr class="even">
<td><code>Z</code></td>
<td>Remove trailing directory separator</td>
</tr>
</tbody>
</table></div>
<p>Directory separator filters <code>z</code> and <code>Z</code> can be useful when dealing with root and unnormalized paths.</p>
<div class="table-container"><table>
<thead>
<tr class="header">
<th>Input</th>
<th><code>{}b</code></th>
<th><code>{}/b</code></th>
<th><code>{z}b</code></th>
<th><code>{Z}/b</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/</code></td>
<td><code>/b</code></td>
<td><code>//b</code></td>
<td><code>/b</code></td>
<td><code>/b</code></td>
</tr>
<tr class="even">
<td><code>a</code></td>
<td><code>ab</code></td>
<td><code>a/b</code></td>
<td><code>a/b</code></td>
<td><code>a/b</code></td>
</tr>
<tr class="odd">
<td><code>a/</code></td>
<td><code>a/b</code></td>
<td><code>a//b</code></td>
<td><code>a/b</code></td>
<td><code>a/b</code></td>
</tr>
</tbody>
</table></div>
<!-- pandoc output end -->
</article>
<nav id="steps">
<ul id="step-list">
<li id="prev-step" class="step">
<a class="step-link" href="/rew/filters" rel="prev">
<span class="step-direction">Â« Previous</span>
<span class="step-label">ğŸ•¶ Filters</span>
</a>
</li>
<li id="next-step" class="step">
<a class="step-link" href="/rew/filters/substr" rel="next">
<span class="step-direction">Next Â»</span>
<span class="step-label">ğŸ† Substring filters</span>
</a>
</li>
</ul>
</nav>
</main>
</div>
<footer id="footer">
<ul id="footer-items">
<li id="copyright-footer-item" class="footer-item">
Â© 2020 Jan Pikl
</li>
<li id="single-page-footer-item" class="footer-item">
<a href="/rew/all-in-one" rel="alternate" media="print">Single-page version</a>
</li>
<li id="pdf-footer-item" class="footer-item">
<a href="/rew/rew.pdf" rel="alternate" type="application/pdf">PDF version</a>
</li>
<li id="generator-footer-item" class="footer-item">
Generated by <a href="https://github.com/jpikl/hatcher" rel="external">hatcher</a>
</li>
</ul>
</footer>
</body>
</html>
